<!--
	此示例下载自 https://echarts.apache.org/examples/zh/editor.html?c=graph-simple&code=DYUwLgBAJghmMQLwQN4CgIQHYHsogGcAuCAbXQEgKAiAYwDkBXAWwCMQAnakgJgAZ-AdgA0aKnTggA5jg4BPbhD6jxWGMxCK6jAmBzMA9LHgGCnAG4BLWiACMAWhjBLcxlgPmYjYGEe0wluYgzACO1GIAvsKoYjQMLOxcvAJ8IrESYNKyCiS2KjRqGlpmHFY2Dk4ubuEUUTHi8Wycijw8ACwAHPkZWfIt3YWaJNS2AJw8AHS2AGwdE21tE4IAzDV1lHFMTUkQrW1pDZIyfbwD6kMQI-NTs_OLgtNr0Rt0W4kt7QdxR9n96YNaMaTGZzTpTDqPSLPdKNd68drTbq0H4nXZnIrDIE3UH3QRPeqbBLNeELJEonJo_7nQHXEF3JZtfEvWHE3btNpkzLHCk8dEXK7A24LJYAViZMLerL2HJh5L-qmpmNpQrmtg6jKhBNeRJ20s5vR5fJpgtBqo6eM1zMluvay313PlBUVlyxdLBarFlolOsUo0EbTtsq5vxIyipGMutGAOEYUCMcBgRhA5hwAAcCPYSmU7AZMlgbFhfFnrCAeOKGtbff7A4dg6i8uH-fgU-nMxYS7Zy4Tth9SUGDY7qAClSapjxRlNBGWvRWfbkOqMa9864bG8bsRM-FNbBbatDZz3533awPTmuRxvplM2qMu9rDxBlhDRvaQ0ojcNaDo9IZjIni-U9h5gWYAeF4Ph-AEQShHeLI7E-0wvv2Dq5B-lwAXYQEgPm2FgLBla5OMiLIW-vLni6yoTssIoTDwO74XOEC2CKYYnihlIKhGAo3FRkzTnuWpwYozGscup4cU6XGuohEzLMs24dAxD4ia-qJkZx_LSVR8kireM7dnCTEsapq4aeuMxUYszGrPp96GSpJFqWh3EWbJiyjHpAlWoxDlsaRzlabJNG2K0Sn2TeJmDsOFGCrxUwip2tlCbkEWOaZkmaZRsnyTMnped6ympX5TnkS5MlyVMfphaythFWJ7HqRl5nlfJPBPtVOy1UhxXpUOzpldpEzqh1wl1T0DUBVl1Hxfx6wFeF3X1f5pWBdNO6zfuBmsn6AaRaGzlfro-jxiYzZphmGG2AYtCWPYABWlgcHAOA4MAI2EXwxE9VF_XSaqOWJflB72R0IpfUtJVmRedK2PJox5XNwPbdWe3vqVUYxnGf5Ji2F3tuUubYSBbalB2awALoqM4WAANbEGQLzRdQ_BCNQ3QEDGHA2MU-OYZUrhYGz6TwBwUjgFoh0_id_68xUzgC2B3i-DA_iBMEYS2UzeyKeznPc9DQr3Ks3Qi2LeHDJdjjy9Umv9XseK64wXOZaOwoPEL4im-LFuy1bVSC7bXH2x7NAc07-sxRu7oQiH1Be-b6G-_zNtA01wx7I8jvO81OJLA7wswKL3uJ6TgHJwHqd9UH7Kx2H2cG7n_qx_HPOl3z1sV4jaeXNKtd6y7Uf3GKJuF2brfZnL_t3lrNdZxHZWmuCjIj0XCfUJb5fT3bs_pHX89_fMZr557o_F-vScd1v1cBn34cD26ZrDwXq_jx2fsC1f_I7cbu_91oZ2tkus3U-a8Maxmljjc6JMJ6ExwoWaBJYNpahngsW-9dI4w3HJOMsK8x7DAAXjNugMu5V00guH-4g9731uFuWw9FcFnwIQg8on9ATqmXr_O-OcJhXi6sAl--DkxQKAYHfkCFbxz35JbYCuF-F4MjN-Y62NpFE1worCCKsoLq1YSOTOnD0EDSCrRehz95HnyIVhOBeFRGAhYmg_eU0-JyLPioqxOiXR2Mkc1QadCdamJcb7GRhZ3EjE8fohxsVsoTF0s4teriQIhJEvY6hll4oUJoC3H2FignWMrkzJJXiDapI8rE1-gEcmJLCZQv-RSjEhRwf4uJgTVHBJsZiG8yTvGyWBAlUpWSJ6WISW0l0HTCkYJajcJ-J8BElwGRU4ZIxRnhJSVEsYx8MkgLKZheZeTfpLOqVw2pFU2p-OmWY-JsiFl8LGYYiqw0GFNOyS03JJD8n7NDjU8ZVFgoigaWcgJTy3FXPeevT5tzgpTj6bMt-OzXn9W_p0wRuNmF2ChdoI6v4EyQMAbLa6t0HpPT0K9RJoxPqIvGf9bcaKmEiN2VJUGeiDkGIPrDCY8NqVCJxUQkJCKbk0tlmisBWMsX8qIbA4mtKIjkwwGgCIMraA4CwLoCACrowcFsEgCAAByAAxHwT6KtaBaoANxoAVUqyAqrZA8E1bqgAZnawQUA1QmrNYq5VVqODLFtTqtoIpWB-iNaaiAaA_wTFwPgAgEw7WyAAKIqwABYAAoI0gCQAAPhiJgSwdqIAprwCACYyIVxIEQMgPgABKLNmBsAFomAQOQbBXoAGVLAAC803IEEHwYNNbU0TEsJkZgzawByFAJq9ANaa2epIJ62wGAa0RF7RECAIBgBmAgDmvN_bi0GlLcgWwVbJ19rrQ2ptwBW0ds1SxXtmB-2DuCCOsdnbq1TpnSq161qF2YCXQulda6N1bvzfgIt5J927CPd-2tIGz2sBbe2l9ywe1QfvUOp947kDHrfZ-jgs6cPLCg7-n9C7-2wfg1e5ApHG1wYvQhiAABqaDha4IGFsPqvgJG61pmwpqu1TgzCyorcG0NCYJjUzptGuNiak3iYzdW8TYmYDsGABOqDlQpBYBIFqkCnAtWiCnTGwsl6QC5B4H-4TEQhMytAJalElhCCavICh84WnAD3sYAEP09NQYfcO0doASBYanR-tVeG1XzqnXKn9-nX3YBc9qwAd26AHALQAn9qAEMYrzU6fPoZMzF7DIXgtfoi7K0QgXBhacAEXagB2I0APdeABJAAChlmtWW_M5cC3l2QoXZAEaK1KmVaYAiKtU5gAIYB_MxcyAADzAFpwAzoqAG-fQAf2qAEYYprUQF2gDFlgKAJAnNTr_LOuzhAJjMBgKmJNk25OTfDecCt0WpXRZKPZ-me2a2jtTDlrVUgnqpgTU1zAwAYByBjDN7VMbnb_YgGR2jHaSAii6FBqAT0pBSCU-NsAHBGAgGi5gDgOB1AkAx1jnHEAY2HXoAWgAglAO6KsiZyEJ5j7HUHd3HGe4dusz2ScgCgGLZt1HXq7a1Xp7Vhc8cAHctWUygwYAwq7ecgH5-e4zu2OjKCYnwaXU6ediwADJKbXQFqDd7ZCneAEboLNaCAJpwOLxnxPjdvZANN7LFvLc1sM2AFXuwOPu4gOtv34PTtgEyBwC7kG_e4_AE7LAEBrthsGLeoLkXk-EZJ4D5TbuDOKq9wh0zJOp3W9t_bkAaeoPg5sFnmtHAQCpm8AQSwirkj6oL_LvX2EpBgATaZ33i6ScHegKJ1NBB0-WFpvTMN4mCB_ulZFtAzA5AAGEE2FzAPW8AAB5VMg2sBJoG43rAVnWBj6gMv1fi_nC0BprGoIhYk0L7PxwMAVmQ0GAAFRv4wG_iAgBFv0AFnai2gAFhGAAhboAJ0OgA34qADRcoAG9yX-EAAAAqmIXOoCqivk_l_gYGgHam4KrENsftto_mABftYNfrfmAEmrQGgc_jFpQavhMIqkmtppfjTCLtgfmDvnmkgU9MwAQBHu7p4BwCqmBsgFweoFGmGqztkK3pbqmgACpyAfaaqiE8ETAJ4FryEfZJ5-56Ao6gDNo27i4U6RoUFUHRDKG8FJ6WZJ7l6yB5oCEQB3Sao9oOEQAAA8g-8A4aBaUaoAWAneCaxqDh9G9GfBmWuaSaahkapAd05MoGJaAAhGWpgHwBAKEe7pEYQNEbEX-BOkRpHhkQQFkevhwM9rVtts7ogMhpHh4TAF4VETEfQR9lgIgHxuuiAFoUFgUUUZIfIIgPYLYB0VOjoVIHoQYUYYQCYavtEF0TES_qnr1jKu_p_hAN_oAKo6gAAPqABoRrNoALepgAQUGgFwGIHIHMCoGr5HHKEQDmEYFYE4EcHDGjG27jEECTFP5mEnG8Exb2Hcax7IDxHxHmGqGiY_HSEQD77uqaq0FP4TBmxb475Jp3aO6YBPaEBlH4CXYiEfHFGlHlGTagkEBcy65j40z0DnBKFYmDD4mcD2ZEnj6arglKrYmZEokEBonO6xFT5UklEgAAAiCY9J2-B-UaLJpALJbJk22RCYXJ9mfJ8AAAsmdpqlgCAOLhAAqedoiX7iibSTTJThwIIcgKQOTEnrLhAIAMr6gAskqACcFgcYAPRmGxwBgAMP-ADFCYABJygAjDqAAA6YAIGRuxgAAkaACQ5sATaYcWEXmj8WkVOqaYAEgJgASvqAB-RoAAxKgZwB4mBxwB8cwBgAPApImk4n46kvHanEl6kcDRAEm0A6mkkaBlnUkgAFnRBE4gBzGW5AZFm0wlliYd5d6Rnu4omym1Hg7xqUFJoEBQByZ9kJjqnr7kGjk3bVlQ5QAVrNmR7g52GFybpOGBGWBuFQ61k6kdm-H-FbnBE9nVGtm1n9lTkr6Fl7nFn6mkCWDkxLm5bVFBb2Ffj6m4T9maoTnylnYwngAjm3ntn3mPnLmvlBYfk16Fj9lxF7rID2AKld4TBKYvFQVfmiY9FyDgWvkp7VF4WR65mF4XmTn_lmwjmEnElVlNmNE8bICtFmCDGQVUHTlwkH576Cnuo4XEYRarptEvmYCmmWkhm2m7FOlulenekbGAA03oAABygAQjohm5l2r5nEk3ncn7n6llmUW0zUU1kaVqUNlM7cWbrhFtm6n6mdl-HdkCVBa_kDlSbDmjnjkkV_mpjTkjlQBznY4LlLlMXZ6CFJr2GOHlqBGOHuHmUHldkBFBEhG2V-7nncmXn_nXlAUGUgUcBZHPntYQU1rvlOzQVgDfnID2VTnkWRX3mzH-WvnoUwWYXCFqlwAJooWsBoUFUYWeFYUmV-4EU9VEVW6uUwBlWAXlmVm3a0W_EQCNnVWYBQlr5mBgBsUMEMkWG5kEVypz5LFwGACn5vGYAHvxgApcYLYXEnEQBT4QCAAr8YAHtqwBBxgAfKaACmioACbWgAY2mAAQKiddwVDjpSSWSYAAl2gA_X7AGACwKoAA-en1KB5lBAEAPpu1wB71ENpx-AteEAtpgAZCo-lxmADb8YADIRu1NxbBuBseKl22BZMmhl31FZVF5w-lNJFNyNqYaR9h8cBZjmxpUGUN0algPgnA5NtMcmCm8c4Go11NGgFakmHAQ5yasmiAmaOVI2ICBZEwde1ufNNM9a_cJlU-ytOg0txJGtd8FahGy5QGDNp5pOthQV6525oVG57hLNalVlR5m6J58VHuql4-atI-U1italD5lMu56VdM0xIAteJl61sqQAA
	⚠ 请注意，该图表不是 Apache ECharts 官方示例，而是由用户代码生成的。请注意鉴别其内容。
-->
<!DOCTYPE html>
<html lang="zh-CN" style="height: 100%">
<head>
  <meta charset="utf-8">
</head>
<body style="height: 100%; margin: 0">
  <div id="container" style="height: 100%"></div>

  
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
  <!-- Uncomment this line if you want to dataTool extension
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.4.3/dist/extension/dataTool.min.js"></script>
  -->
  <!-- Uncomment this line if you want to use gl extension
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts-gl@2/dist/echarts-gl.min.js"></script>
  -->
  <!-- Uncomment this line if you want to echarts-stat extension
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts-stat@latest/dist/ecStat.min.js"></script>
  -->
  <!-- Uncomment this line if you want to use map
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@4.9.0/map/js/china.js"></script>
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@4.9.0/map/js/world.js"></script>
  -->
  <!-- Uncomment these two lines if you want to use bmap extension
  <script type="text/javascript" src="https://api.map.baidu.com/api?v=3.0&ak=YOUR_API_KEY"></script>
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.4.3/dist/extension/bmap.min.js"></script>
  -->

  <script type="text/javascript">
    var dom = document.getElementById('container');
    var myChart = echarts.init(dom, null, {
      renderer: 'canvas',
      useDirtyRect: false
    });
    var app = {};
    
    var option;

    let data = {
  nodes: [{
		"cNumber": 20207,
		"category": 0,
		"name": "custom/data/service1-aliyun/vault-activemq"
	}, {
		"cNumber": 20207,
		"category": 1,
		"name": "service1-aliyun"
	}, {
		"cNumber": 2248,
		"category": 2,
		"name": "192.168.44.73"
	}, {
		"cNumber": 2247,
		"category": 2,
		"name": "192.168.44.76"
	}, {
		"cNumber": 2247,
		"category": 2,
		"name": "192.168.48.186"
	}, {
		"cNumber": 2246,
		"category": 2,
		"name": "192.168.44.77"
	}, {
		"cNumber": 2244,
		"category": 2,
		"name": "192.168.44.74"
	}, {
		"cNumber": 2244,
		"category": 2,
		"name": "192.168.44.75"
	}, {
		"cNumber": 2244,
		"category": 2,
		"name": "192.168.48.184"
	}, {
		"cNumber": 2244,
		"category": 2,
		"name": "192.168.48.187"
	}, {
		"cNumber": 2243,
		"category": 2,
		"name": "192.168.48.185"
	}, {
		"cNumber": 9743,
		"category": 0,
		"name": "cloud/data/devops-service1/tencent-service2"
	}, {
		"cNumber": 9743,
		"category": 1,
		"name": "devops-service1"
	}, {
		"cNumber": 2244,
		"category": 2,
		"name": "192.168.129.172"
	}, {
		"cNumber": 1893,
		"category": 2,
		"name": "192.168.0.117"
	}, {
		"cNumber": 1844,
		"category": 2,
		"name": "192.168.6.149"
	}, {
		"cNumber": 3869,
		"category": 0,
		"name": "custom/data/service1-tencent/vault-activemq"
	}, {
		"cNumber": 3869,
		"category": 1,
		"name": "service1-tencent"
	}, {
		"cNumber": 1926,
		"category": 2,
		"name": "192.169.35.217"
	}, {
		"cNumber": 150,
		"category": 2,
		"name": "192.169.32.2"
	}, {
		"cNumber": 150,
		"category": 2,
		"name": "192.169.33.118"
	}, {
		"cNumber": 150,
		"category": 2,
		"name": "192.169.33.59"
	}, {
		"cNumber": 150,
		"category": 2,
		"name": "192.169.34.153"
	}, {
		"cNumber": 150,
		"category": 2,
		"name": "192.169.34.99"
	}, {
		"cNumber": 150,
		"category": 2,
		"name": "192.169.35.122"
	}, {
		"cNumber": 149,
		"category": 2,
		"name": "192.169.32.151"
	}, {
		"cNumber": 149,
		"category": 2,
		"name": "192.169.33.165"
	}, {
		"cNumber": 149,
		"category": 2,
		"name": "192.169.33.197"
	}, {
		"cNumber": 149,
		"category": 2,
		"name": "192.169.33.238"
	}, {
		"cNumber": 149,
		"category": 2,
		"name": "192.169.33.84"
	}, {
		"cNumber": 149,
		"category": 2,
		"name": "192.169.35.152"
	}, {
		"cNumber": 149,
		"category": 2,
		"name": "192.169.35.172"
	}, {
		"cNumber": 9743,
		"category": 0,
		"name": "custom/data/devops-service1/ci-jiratool"
	}, {
		"cNumber": 1906,
		"category": 2,
		"name": "192.168.13.11"
	}, {
		"cNumber": 1856,
		"category": 2,
		"name": "192.168.13.95"
	}, {
		"cNumber": 9743,
		"category": 0,
		"name": "cloud/data/devops-service1/tencent-service1"
	}],
	links: [{
		"name": "20207",
		"source": "service1-aliyun",
		"target": "custom/data/service1-aliyun/vault-activemq"
	}, {
		"name": "2248",
		"source": "192.168.44.73",
		"target": "service1-aliyun"
	}, {
		"name": "2247",
		"source": "192.168.44.76",
		"target": "service1-aliyun"
	}, {
		"name": "2247",
		"source": "192.168.48.186",
		"target": "service1-aliyun"
	}, {
		"name": "2246",
		"source": "192.168.44.77",
		"target": "service1-aliyun"
	}, {
		"name": "2244",
		"source": "192.168.44.74",
		"target": "service1-aliyun"
	}, {
		"name": "2244",
		"source": "192.168.44.75",
		"target": "service1-aliyun"
	}, {
		"name": "2244",
		"source": "192.168.48.184",
		"target": "service1-aliyun"
	}, {
		"name": "2244",
		"source": "192.168.48.187",
		"target": "service1-aliyun"
	}, {
		"name": "2243",
		"source": "192.168.48.185",
		"target": "service1-aliyun"
	}, {
		"name": "9743",
		"source": "devops-service1",
		"target": "cloud/data/devops-service1/tencent-service2"
	}, {
		"name": "2244",
		"source": "192.168.129.172",
		"target": "devops-service1"
	}, {
		"name": "1893",
		"source": "192.168.0.117",
		"target": "devops-service1"
	}, {
		"name": "1844",
		"source": "192.168.6.149",
		"target": "devops-service1"
	}, {
		"name": "3869",
		"source": "service1-tencent",
		"target": "custom/data/service1-tencent/vault-activemq"
	}, {
		"name": "1926",
		"source": "192.169.35.217",
		"target": "service1-tencent"
	}, {
		"name": "150",
		"source": "192.169.32.2",
		"target": "service1-tencent"
	}, {
		"name": "150",
		"source": "192.169.33.118",
		"target": "service1-tencent"
	}, {
		"name": "150",
		"source": "192.169.33.59",
		"target": "service1-tencent"
	}, {
		"name": "150",
		"source": "192.169.34.153",
		"target": "service1-tencent"
	}, {
		"name": "150",
		"source": "192.169.34.99",
		"target": "service1-tencent"
	}, {
		"name": "150",
		"source": "192.169.35.122",
		"target": "service1-tencent"
	}, {
		"name": "149",
		"source": "192.169.32.151",
		"target": "service1-tencent"
	}, {
		"name": "149",
		"source": "192.169.33.165",
		"target": "service1-tencent"
	}, {
		"name": "149",
		"source": "192.169.33.197",
		"target": "service1-tencent"
	}, {
		"name": "149",
		"source": "192.169.33.238",
		"target": "service1-tencent"
	}, {
		"name": "149",
		"source": "192.169.33.84",
		"target": "service1-tencent"
	}, {
		"name": "149",
		"source": "192.169.35.152",
		"target": "service1-tencent"
	}, {
		"name": "149",
		"source": "192.169.35.172",
		"target": "service1-tencent"
	}, {
		"name": "9743",
		"source": "devops-service1",
		"target": "custom/data/devops-service1/ci-jiratool"
	}, {
		"name": "1906",
		"source": "192.168.13.11",
		"target": "devops-service1"
	}, {
		"name": "1856",
		"source": "192.168.13.95",
		"target": "devops-service1"
	}, {
		"name": "9743",
		"source": "devops-service1",
		"target": "cloud/data/devops-service1/tencent-service1"
	}]
 
}
 
const color1 = '#006acc';
const color2 = '#ff7d18';
const color3 = '#45b97c';
 
data.nodes.forEach(node => {
  if (node.category === 0) {
    node.symbolSize = 70;
    node.itemStyle = {
      color: color1
    };
  } else if (node.category === 1) {
    node.symbolSize = 50;
    node.itemStyle = {
      color: color2
    };
  } else if (node.category === 2) {
    node.symbolSize = 30;
    node.itemStyle = {
      color: color3
    };
  }
  node.symbolSize = node.symbolSize + node.cNumber/1000
  node.open = false
});
 
data.links.forEach(link => {
  link.label = {
    align: 'center',
    fontSize: 12
  };
 
});
 
let categories = [{
    name: '路径',
    itemStyle: {
        color: color1
    }
  },
  {
    name: '目标对象',
    itemStyle: {
        color: color2
    }
},
{
    name: '客户端IP',
    itemStyle: {
        color: color3
    }
}]
 
option = {
  title: {
    text: '关系图谱',
  },
  legend: [{
    data: categories.map(x => x.name),
  }],
  series: [{
    type: 'graph',
    layout: 'force',
    symbolSize: 58,
    draggable: true,
    roam: true,
    focusNodeAdjacency: true,
    categories: categories,
    edgeSymbol: ['', 'arrow'],
    // edgeSymbolSize: [80, 10],
    edgeLabel: {
      normal: {
        show: true,
        textStyle: {
          fontSize: 20
        },
        formatter(x) {
          return x.data.name;
        }
      }
    },
    label: {
      fontSize: 12,
        show: true
    },
    force: {
      repulsion: 2000,
      edgeLength: 120
    },
    data: data.nodes,
    links: data.links
  }]
}
 
myChart.setOption(option);
bindChartClickEvent(myChart);
 
/**
 * 绑定图表的点击事件
 * @param chart
 */
function bindChartClickEvent(chart) {
    chart.on('click', function (params) {
        var category = params.data.category,
            nodeType = params.data.nodeType;
            toggleShowNodes(chart, params);
    });
    
    for (var j = 0; j < data.nodes.length; j++) {
      if (data.nodes[j].category !==  0 ) {
          data.nodes[j].data = {};
          data.nodes[j].seriesIndex=0;
          data.nodes[j].open=false;
          data.nodes[j].category=-1;
          toggleShowNodes(chart, data.nodes[j]);
      }
    }
}
 
/**
 * 展开或关闭节点
 * @param chart
 * @param params
 */
function toggleShowNodes(chart, params) {
    var open = !!params.data.open,
        options = chart.getOption(),
        seriesIndex = params.seriesIndex,
        srcLinkName = params.name,
        serieLinks = options.series[seriesIndex].links,
        serieData = options.series[seriesIndex].data,
        serieDataMap = new Map(),
        serieLinkArr = [];
    // 当前根节点是展开的，那么就需要关闭所有的根节点
    if (open) {
        // 递归找到所有的link节点的target的值
        findLinks(serieLinkArr, srcLinkName, serieLinks, true);
        if (serieLinkArr.length) {
            serieData.forEach(sd => serieDataMap.set(sd.name, sd));
            for (var i = 0; i < serieLinkArr.length; i++) {
                if (serieDataMap.has(serieLinkArr[i])) {
                    var currentData = serieDataMap.get(serieLinkArr[i]);
                    currentData.category = -Math.abs(currentData.category);
                }
            }
            
            serieDataMap.get(srcLinkName).open = false;
            chart.setOption(options);
        }
    } else {
        // 当前根节点是关闭的，那么就需要展开第一层根节点
        findLinks(serieLinkArr, srcLinkName, serieLinks, true);
        if (serieLinkArr.length) {
            serieData.forEach(sd => serieDataMap.set(sd.name, sd));
            for (var j = 0; j < serieLinkArr.length; j++) {
                if (serieDataMap.has(serieLinkArr[j])) {
                    var currentData = serieDataMap.get(serieLinkArr[j]);
                    currentData.category = Math.abs(currentData.category);
                }
            }
            serieDataMap.get(srcLinkName).open = true;
            chart.setOption(options);
        }
    }
}
 
/**
 * 查找连接关系
 * @param links 返回的节点放入此集合
 * @param srcLinkName 源线的名称
 * @param serieLinks 需要查找的集合
 * @param deep 是否需要递归进行查找
 */
function findLinks(links, srcLinkName, serieLinks, deep) {
    var targetLinks = [];
    serieLinks.filter(link => link.target === srcLinkName).forEach(link => {
        targetLinks.push(link.source);
        links.push(link.source)
    });
    if (deep) {
        for (var i = 0; i < targetLinks.length; i++) {
            findLinks(links, targetLinks[i], serieLinks, deep);
        }
    }
}

    if (option && typeof option === 'object') {
      myChart.setOption(option);
    }

    window.addEventListener('resize', myChart.resize);
  </script>
</body>
</html>